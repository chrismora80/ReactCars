{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chris\\\\Desktop\\\\RUTGERS\\\\Homework\\\\week22\\\\ReactCars\\\\client\\\\src\\\\pages\\\\Cars.js\";\nimport React, { useState, useEffect } from \"react\";\nimport firebase from \"firebase\";\nimport DeleteBtn from \"../components/DeleteBtn\";\nimport UpdateBtn from \"../components/UpdateBtn\";\nimport Jumbotron from \"../components/Jumbotron\";\nimport API from \"../utils/API\";\nimport { Link } from \"react-router-dom\";\nimport { Col, Row, Container } from \"../components/Grid\";\nimport { List, ListItem } from \"../components/List\";\nimport { Input, TextArea, FormBtn } from \"../components/Form\";\nimport { Redirect } from \"react-router-dom\";\nimport Modal from \"react-modal\";\nconst customStyles = {\n  content: {\n    top: '75%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -100%)'\n  }\n};\n\nfunction Cars(props) {\n  const [cars, setCar] = useState([]);\n  const [formObject, setFormObject] = useState({});\n  const [userId, setUserId] = useState(null);\n  const [isOpen, setIsOpen] = useState(false);\n  useEffect(() => {\n    if (props.user) {\n      setUserId(props.user.uid);\n      setCar([]);\n      loadCars(props.user.uid);\n    } else {\n      setCar([]);\n    }\n  }, []);\n\n  function loadCars(uid) {\n    API.getCars({\n      userId: uid\n    }).then(res => setCar(res.data)).catch(err => console.log(err));\n  }\n\n  function deleteCar(id) {\n    API.deleteCar(id).then(res => loadCars(userId)).catch(err => console.log(err));\n  }\n\n  function updateCar(car) {\n    setFormObject({ ...car\n    });\n  }\n\n  function handleInputChange(event) {\n    const {\n      name,\n      value\n    } = event.target;\n    setFormObject({ ...formObject,\n      [name]: value\n    });\n  }\n\n  console.log(formObject);\n\n  function handleFormSubmit(event) {\n    event.preventDefault();\n\n    if (formObject._id) {\n      API.updateCar(formObject._id, {\n        year: formObject.year,\n        model: formObject.model,\n        brand: formObject.brand,\n        description: formObject.description,\n        imageURL: formObject.imageURL\n      }).then(res => loadCars(userId)).catch(err => console.log(err));\n    } else if (formObject.year && formObject.brand) {\n      API.saveCar({\n        userId,\n        year: formObject.year,\n        model: formObject.model,\n        brand: formObject.brand,\n        description: formObject.description,\n        imageURL: formObject.imageURL\n      }).then(res => loadCars(userId)).catch(err => console.log(err));\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Container, {\n    fluid: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }\n  }, !props.user ? /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, \"Car tracker click here \"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setIsOpen(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }\n  }, \"Click Me\"), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: isOpen,\n    onRequestClose: () => setIsOpen(false),\n    style: customStyles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    size: \"md-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 19\n    }\n  }, formObject._id ? /*#__PURE__*/React.createElement(\"input\", {\n    type: \"hidden\",\n    value: formObject._id,\n    name: \"id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 23\n    }\n  }) : null, /*#__PURE__*/React.createElement(Input, {\n    onChange: handleInputChange,\n    name: \"year\",\n    placeholder: \"Year (required)\",\n    value: formObject.year,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    onChange: handleInputChange,\n    name: \"model\",\n    placeholder: \"Model (required)\",\n    value: formObject.model,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    onChange: handleInputChange,\n    name: \"brand\",\n    placeholder: \"Brand (required)\",\n    value: formObject.brand,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    onChange: handleInputChange,\n    name: \"imageURL\",\n    placeholder: \"imageURL (required)\",\n    value: formObject.imageURL,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    onChange: handleInputChange,\n    name: \"description\",\n    placeholder: \"Price,Conditon,Comments (Optional)\",\n    value: formObject.description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(FormBtn, {\n    disabled: !(formObject.year && formObject.model),\n    onClick: handleFormSubmit,\n    className: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, \"Submit Car\"))), /*#__PURE__*/React.createElement(Col, {\n    size: \"md-6 sm-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, cars.length ? /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, cars.map(car => /*#__PURE__*/React.createElement(ListItem, {\n    key: car._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: \"/cars/\" + car._id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: car.imageURL,\n    className: \"img-fluid\",\n    alt: car.brand,\n    width: 500,\n    height: 500,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(DeleteBtn, {\n    onClick: () => deleteCar(car._id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(UpdateBtn, {\n    onClick: () => updateCar(car),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 27\n    }\n  }), /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 29\n    }\n  }), car.brand, \" \", car.model)))) : /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 21\n    }\n  }, \"No Results to Display\"))), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setIsOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, \"Close\")))));\n}\n\nexport default Cars;","map":{"version":3,"sources":["C:/Users/chris/Desktop/RUTGERS/Homework/week22/ReactCars/client/src/pages/Cars.js"],"names":["React","useState","useEffect","firebase","DeleteBtn","UpdateBtn","Jumbotron","API","Link","Col","Row","Container","List","ListItem","Input","TextArea","FormBtn","Redirect","Modal","customStyles","content","top","left","right","bottom","marginRight","transform","Cars","props","cars","setCar","formObject","setFormObject","userId","setUserId","isOpen","setIsOpen","user","uid","loadCars","getCars","then","res","data","catch","err","console","log","deleteCar","id","updateCar","car","handleInputChange","event","name","value","target","handleFormSubmit","preventDefault","_id","year","model","brand","description","imageURL","saveCar","marginTop","length","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport DeleteBtn from \"../components/DeleteBtn\";\r\nimport UpdateBtn from \"../components/UpdateBtn\";\r\nimport Jumbotron from \"../components/Jumbotron\";\r\nimport API from \"../utils/API\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Col, Row, Container } from \"../components/Grid\";\r\nimport { List, ListItem } from \"../components/List\";\r\nimport { Input, TextArea, FormBtn } from \"../components/Form\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Modal from \"react-modal\";\r\nconst customStyles = {\r\n\r\n  content : {\r\n    top                   : '75%',\r\n    left                  : '50%',\r\n    right                 : 'auto',\r\n    bottom                : 'auto',\r\n    marginRight           : '-50%',\r\n    transform             : 'translate(-50%, -100%)'\r\n  }\r\n\r\n};\r\nfunction Cars(props) {\r\n  const [cars, setCar] = useState([]);\r\n  const [formObject, setFormObject] = useState({});\r\n  const [userId, setUserId] = useState(null);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  useEffect(() => {\r\n    if (props.user) {\r\n      setUserId(props.user.uid);\r\n\r\n      setCar([]);\r\n      loadCars(props.user.uid);\r\n    } else {\r\n      setCar([]);\r\n    }\r\n  }, []);\r\n\r\n  function loadCars(uid) {\r\n    API.getCars({ userId: uid })\r\n      .then((res) => setCar(res.data))\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function deleteCar(id) {\r\n    API.deleteCar(id)\r\n      .then((res) => loadCars(userId))\r\n      .catch((err) => console.log(err));\r\n  }\r\n\r\n  function updateCar(car) {\r\n    setFormObject({ ...car });\r\n  }\r\n\r\n  function handleInputChange(event) {\r\n    const { name, value } = event.target;\r\n    setFormObject({ ...formObject, [name]: value });\r\n  }\r\n\r\n  console.log(formObject);\r\n\r\n  function handleFormSubmit(event) {\r\n    event.preventDefault();\r\n\r\n    if (formObject._id) {\r\n      API.updateCar(formObject._id, {\r\n        year: formObject.year,\r\n        model: formObject.model,\r\n        brand: formObject.brand,\r\n        description: formObject.description,\r\n        imageURL: formObject.imageURL,\r\n      })\r\n        .then((res) => loadCars(userId))\r\n        .catch((err) => console.log(err));\r\n    } else if (formObject.year && formObject.brand) {\r\n      API.saveCar({\r\n        userId,\r\n        year: formObject.year,\r\n        model: formObject.model,\r\n        brand: formObject.brand,\r\n        description: formObject.description,\r\n        imageURL: formObject.imageURL,\r\n      })\r\n        .then((res) => loadCars(userId))\r\n        .catch((err) => console.log(err));\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div style={{ marginTop: \"20px\" }}>\r\n      <Container fluid>\r\n        {!props.user ? (\r\n          <Redirect to=\"/\" />\r\n        ) : (\r\n          <div className=\"login\">\r\n            <h2>Car tracker click here </h2>\r\n            <button onClick={() => setIsOpen(true)}>Click Me</button>\r\n            <Modal isOpen={isOpen} onRequestClose={() => setIsOpen(false)}\r\n            style={customStyles}\r\n            >\r\n              <Row>\r\n                <Col size=\"md-6\">\r\n                  <form>\r\n                    {formObject._id ? (\r\n                      <input type=\"hidden\" value={formObject._id} name=\"id\" />\r\n                    ) : null}\r\n                    <Input\r\n                      onChange={handleInputChange}\r\n                      name=\"year\"\r\n                      placeholder=\"Year (required)\"\r\n                      value={formObject.year}\r\n                    />\r\n                    <Input\r\n                      onChange={handleInputChange}\r\n                      name=\"model\"\r\n                      placeholder=\"Model (required)\"\r\n                      value={formObject.model}\r\n                    />\r\n                    <Input\r\n                      onChange={handleInputChange}\r\n                      name=\"brand\"\r\n                      placeholder=\"Brand (required)\"\r\n                      value={formObject.brand}\r\n                    />\r\n\r\n                    <Input\r\n                      onChange={handleInputChange}\r\n                      name=\"imageURL\"\r\n                      placeholder=\"imageURL (required)\"\r\n                      value={formObject.imageURL}\r\n                    />\r\n\r\n                    <Input\r\n                      onChange={handleInputChange}\r\n                      name=\"description\"\r\n                      placeholder=\"Price,Conditon,Comments (Optional)\"\r\n                      value={formObject.description}\r\n                    />\r\n\r\n                    <FormBtn\r\n                      disabled={!(formObject.year && formObject.model)}\r\n                      onClick={handleFormSubmit}\r\n                      className=\"\"\r\n                    >\r\n                      Submit Car\r\n                    </FormBtn>\r\n                  </form>\r\n                </Col>\r\n                <Col size=\"md-6 sm-12\">\r\n                  {cars.length ? (\r\n                    <List>\r\n                      {cars.map((car) => (\r\n                        <ListItem key={car._id}>\r\n                          <Link to={\"/cars/\" + car._id}>\r\n                            <img\r\n                              src={car.imageURL}\r\n                              className=\"img-fluid\"\r\n                              alt={car.brand}\r\n                              width={500}\r\n                              height={500}\r\n                            />\r\n                          </Link>\r\n                          <DeleteBtn onClick={() => deleteCar(car._id)} />\r\n                          <UpdateBtn onClick={() => updateCar(car)} />\r\n                          <strong>\r\n                            <br />\r\n                            {car.brand} {car.model}\r\n                          </strong>\r\n                        </ListItem>\r\n                      ))}\r\n                    </List>\r\n                  ) : (\r\n                    <h3>No Results to Display</h3>\r\n                  )}\r\n                </Col>\r\n              </Row>\r\n              <button onClick={() => setIsOpen(false)}>Close</button>\r\n            </Modal>\r\n          </div>\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cars;\r\n"]},"metadata":{},"sourceType":"module"}